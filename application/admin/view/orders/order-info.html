<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>欢迎页面-X-admin2.0</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="./css/font.css">
		<link rel="stylesheet" href="./css/xadmin.css">
		<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<script type="text/javascript" src="./lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="./js/xadmin.js"></script>
		<script src="js/template-web.js" type="text/javascript" charset="utf-8"></script>
		<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
		<!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	</head>
	<style type="text/css">
		
		th{
			color: green;
		}
	</style>
	<body>
		<fieldset class="layui-elem-field">
			<legend>基本信息</legend>
			<div class="layui-field-box">
				<table class="layui-table">
					<tbody id="tbody">

					</tbody>
				</table>
				<script type="text/html" id="tbodyTest">
					<tr>
						<th>门店名称</th>
						<td>{{Contracts.address_id.shop_name}}</td>
						<th>门店地址</th>
						<td>{{Contracts.address_id.shop_address}}</td>
						<th>门店电话</th>
						<td> {{Contracts.address_id.shop_phone}}
						</td>
					</tr>
					<tr>
						<th>预约单号</th>
						<td>{{Contracts.num_num}}</td>
						<th>车辆类型</th>
						<td>{{Contracts.brand}}</td>
						<th>车牌号</th>
						<td>{{Contracts.plate_number}}</td>

					</tr>
					<tr>
						<th>出厂日期</th>
						<td> {{Contracts.date_of_birth}}</td>

						<th>保养类型</th>
						<td>{{if Contracts.shop_type == 1}}小保养 {{else if Contracts.shop_type ==2}} 大保养 {{/if}}</td>
						<th>公里数</th>
						<td>{{Contracts.car_mileage}}</td>
					</tr>
					<tr>
						<th>车主姓名</th>
						<td>{{Contracts.username}}</td>
						<th>车主电话</th>
						<td>{{Contracts.phone}}</td>
						<th>备注信息</th>
						<td>{{Contracts.content}}</td>
					</tr>
				</script>
			</div>
		</fieldset>
		<fieldset class="layui-elem-field">
			<legend>订单信息</legend>
			<div class="layui-field-box">
				<table class="layui-table">
					<tbody id="tbody1">

					</tbody>
				</table>
				<script type="text/html" id="tbodyTest1">
					<tr>
						<th>订单号</th>
						<td>{{ReportUser.order_num}}</td>
						<th>生成时间</th>
						<td>{{ReportUser.create_time}}</td>
						<th>流水分类</th>
						<td> {{ReportUser.order_class}}
						</td>
					</tr>
					<tr>
						
						<th>金额(元)</th>
						<td>{{ReportUser.money}}</td>
						<th>流水增减</th>
						<td>{{if ReportUser.state == 1}}收入{{else if ReportUser.state == -1}}支出{{/if}}</td>						
						<th>支付方式</th>
						<td>{{ReportUser.pay_type}}</td>
						

					</tr>
					<tr>
						<th>技术操作人</th>
						<td>{{Contracts.technology_id}}</td>
						<th>操作时间</th>
						<td>{{Contracts.update_time}}</td>
						<th>流水状态</th>
						<td>{{ if ReportUser.target_status == 1}}处理中{{else if ReportUser.target_status == 2}}已完成{{/if}}</td>

					</tr>
					
				</script>
			</div>
			</fieldset>
			<fieldset class="layui-elem-field">
			<legend>商品信息</legend>
			<div class="layui-field-box">
				<table class="layui-table">
					<tbody id="tbody2">

					</tbody>
				</table>
				<script type="text/html" id="tbodyTest2">
				{{each data item i}}
					<tr>
				
						
						<th>商品名称</th>
						<td>{{item.title}}</td>
						<th>数量</th>
						<td>{{item.num}}</td>
						<th>价钱</th>
						<td> {{item.unit_price}}</td>
						<th>采购人</th>
						<td> {{item.username}}</td>
						<th>采购操作时间</th>
						<td> {{item.update_time}}</td>
				
						
					</tr>
					{{/each}}
					
				</script>
			</div>
			
		</fieldset>
	</body>
	<script>
		var id = getRequest().id;
		$.ajax({
			type: "post",
			url: api + "/admin/Report/UserReportInfo",
			data: {
				"id": id
			},
			async: false,
			cache: false,
			dataType: "json",
			success: function(data) {
				console.log(data);
				var list = {
							data: data.data.WarehouseHistory,
							
						}
				if(data.code == 1) {
					var html = template('tbodyTest', data.data);
					document.getElementById('tbody').innerHTML = html;
					var html1 = template('tbodyTest1', data.data);
					document.getElementById('tbody1').innerHTML = html1;
					var html2 = template('tbodyTest2', list);
					document.getElementById('tbody2').innerHTML = html2;
				} else {
					alert("查询失败");
				}
			}
		});

			
		</script>
</html>
